<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NeuroTune - 메인</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Fjalla+One&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="../assets/css/common.css" />
    <link rel="stylesheet" href="main-page.css" />
  </head>
  <body>
    <!-- Slide-in Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-content">
        <h2 class="sidebar-title">나의 뇌파 분석</h2>

        <!-- Latest mood state -->
        <div class="mood-summary">
          <h3>현재 상태</h3>
          <div class="mood-badges">
            <span class="mood-badge">집중력 <strong id="engagement">75%</strong></span>
            <span class="mood-badge">긴장도 <strong id="arousal">60%</strong></span>
            <span class="mood-badge">감정 <strong id="valence">80%</strong></span>
          </div>
        </div>

        <!-- Brain wave visualization -->
        <div class="brainwave-viz">
          <h3>뇌파 패턴</h3>
          <div class="wave-bars">
            <div class="wave-bar" style="--height: 70%">
              <span>Theta</span>
            </div>
            <div class="wave-bar" style="--height: 85%">
              <span>Alpha</span>
            </div>
            <div class="wave-bar" style="--height: 60%">
              <span>Beta</span>
            </div>
            <div class="wave-bar" style="--height: 45%">
              <span>Gamma</span>
            </div>
          </div>
        </div>

        <!-- Preference profile -->
        <div class="preference-summary">
          <h3>음악 선호도</h3>
          <div class="preference-tags">
            <span class="tag">차분한 멜로디</span>
            <span class="tag">높은 에너지</span>
            <span class="tag">긍정적 분위기</span>
          </div>
        </div>
      </div>
    </aside>

    <!-- Hover trigger for sidebar -->
    <div class="sidebar-trigger" id="sidebarTrigger"></div>

    <!-- AI Analysis Modal -->
    <div class="ai-analysis-modal" id="aiModal" style="display: none">
      <div class="ai-modal-content">
        <button class="ai-close-btn" id="aiCloseBtn">×</button>
        <h3>🤖 AI 음악 분석</h3>
        <div class="ai-analysis-result" id="aiResult">
          <div class="loading"></div>
          <p>AI가 당신의 음악 취향을 분석하고 있습니다...</p>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Header -->
      <header class="header">
        <h1 class="logo">NeuroTune</h1>
        <div class="header-actions">
          <button class="btn-icon ai-btn" id="aiAnalysisBtn" title="AI 분석">
            🤖
          </button>
          <div class="user-info">
            <span id="userName">사용자</span>님
          </div>
        </div>
      </header>

      <!-- Search Section -->
      <section class="search-section">
        <div class="search-box">
          <input 
            type="text" 
            id="searchInput" 
            placeholder="곡, 아티스트, 앨범 검색..." 
            class="search-input"
          />
          <button class="search-btn" id="searchBtn">🔍</button>
        </div>
        <div class="search-results" id="searchResults" style="display: none"></div>
      </section>

      <!-- Album Slider Section -->
      <section class="album-slider-section">
        <h2 class="section-title">추천 앨범</h2>
        <div class="album-slider" id="albumSlider">
          <!-- Albums will be dynamically loaded -->
        </div>
      </section>

      <!-- Context Selection -->
      <section class="context-section">
        <h2 class="section-title">지금 기분은 어떠신가요?</h2>
        <div class="context-buttons">
          <button class="context-btn" data-context="study">
            <span class="context-icon">📚</span>
            <span>공부</span>
          </button>
          <button class="context-btn" data-context="workout">
            <span class="context-icon">💪</span>
            <span>운동</span>
          </button>
          <button class="context-btn" data-context="relax">
            <span class="context-icon">😌</span>
            <span>휴식</span>
          </button>
          <button class="context-btn" data-context="sleep">
            <span class="context-icon">😴</span>
            <span>수면 전</span>
          </button>
          <button class="context-btn" data-context="commute">
            <span class="context-icon">🚇</span>
            <span>출퇴근</span>
          </button>
          <button class="context-btn" data-context="stress">
            <span class="context-icon">🧘</span>
            <span>스트레스 해소</span>
          </button>
          <button class="context-btn" data-context="happy">
            <span class="context-icon">😊</span>
            <span>기분 좋음</span>
          </button>
        </div>
      </section>

      <!-- Playlist Section -->
      <section class="playlist-section" id="playlistSection" style="display: none">
        <h2 class="section-title">맞춤 플레이리스트</h2>
        <div class="playlist-container" id="playlistContainer">
          <!-- Playlist will be dynamically loaded -->
        </div>
      </section>
    </main>

    <script src="../assets/js/07-main.js"></script>
  </body>
</html>
